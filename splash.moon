-- title:  irrintzi splash screen demo
-- author: irrintzi
-- desc:   reusable splash screen with cga palette
-- script: moon

t=0

sleep=(n)->
	if n==0
		-1
	else
		n-=1
		
rdcol=(n)->
	{
		b0:(peek (0x03fc0+(3*n))),
		b1:(peek (0x03fc0+(3*n)+1)),
		b2:(peek (0x03fc0+(3*n)+2))
	}

wrcol=(n,b0,b1,b2)->
	poke 0x03fc0+(3*n),b0
	poke 0x03fc0+(3*n)+1,b1
	poke 0x03fc0+(3*n)+2,b2

wht=rdcol 3

--init=->
fi=64
fo=256
trgs={
	fi,fi+4,fi+8,fi+12,fi+16,fi+20,fi+24,fi+28,
	fo,fo+4,fo+8,fo+12,fo+16,fo+20,fo+24,fo+28
}
cols={0,1,12,8,13,9,2,3,3,2,9,13,8,12,1,0}
si=1

spl=true

export TIC=->
--	cls 0
	if spl
		cls 0
		while t<fo+96
			if t==trgs[si]
				si+=1
				print "#{cols[si]}",t%240,t%136,3
			t+=1
		spl=false
	cls 7
--	if t==f_in
--			cls 0
--			spr 1,20,20,0,2,0,0,8,2				
--			col=rdcol c
--			wrcol 3,col.b0,col.b1,col.b2
--		wrcol 3,wht.b0,wht.b1,wht.b2

-- <TILES>
-- 001:0000000000000000000000000000000000000000000000000003333000303303
-- 002:0000000000000033000003330000333000033300003330000033000003300000
-- 003:0000000000000000000003000000033000000030000000000000030000000330
-- 004:0000000000000000000000000000000000000000000000003000030033300333
-- 005:0000000000000000003000000033000000030000000000000030030000330333
-- 006:0000000000000000003000000033000000330000033333003333300300330033
-- 007:0000000000000000000030000000330000000300000000003300300033303300
-- 017:0033033300333300003300000033000000333003000333300000000000000000
-- 018:0300003300003333003333000000000000333300000033330000003300000000
-- 019:3300033000000330000003300000033000000330000000303300000000000000
-- 020:3333033333030330330003303300033033000330030000300000000000000000
-- 021:3033033330330330003303300033033000330330000300300000000000000000
-- 022:3033000030330000303300033033030330333303300330000000000000000000
-- 023:0330330033003300300033000000330033303300330003000000000000000000
-- </TILES>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:000000555555aaaaaaffffff0000aa5555ff00aa0055ff5500aaaa55ffffaa0000ff5555aa00aaff55ffaa5500ffff55
-- </PALETTE>

